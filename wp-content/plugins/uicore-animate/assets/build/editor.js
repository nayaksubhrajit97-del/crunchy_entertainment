(()=>{"use strict";const e=window.wp.blockEditor,t=window.wp.components,i=window.wp.data,a=window.wp.element,n=window.wp.hooks,o=window.wp.i18n,l=window.ReactJSXRuntime;(0,n.addFilter)("editor.BlockEdit","uicore-animate/add-animation-controls",(n=>r=>{if(!r?.attributes)return(0,l.jsx)(n,{...r});const{attributes:s,setAttributes:c,name:u,clientId:m}=r;if(-1!==u.indexOf("uicore/")||-1!==u.indexOf("woocommerce/")&&!window.uicore_blocks_editor_settings)return(0,l.jsx)(n,{...r});const{uiAnimateName:d,uiAnimateDuration:y,uiAnimateDelay:g,uiAnimateTrigger:b,uiAnimateDelayEnd:A}=s;return(0,a.useEffect)((()=>{"scroll"===b?((e,t)=>{const a=`uicore-animate-style-${e}`,{uiAnimateDelay:n,uiAnimateDelayEnd:o}=t;((e,t)=>{if(!e||!t)return;const a=(0,i.select)("core/editor").getEditorSettings(),n=a.styles.findIndex((e=>e.id===t)),o=-1!==n?a.styles[n]:null,l=o&&(o.css!==e||!o.isGlobalStyles);if(-1===n||l){const o=-1!==n?a.styles.map(((t,i)=>i===n?{...t,css:e,isGlobalStyles:!0}:t)):[...a.styles,{css:e,isGlobalStyles:!0,id:t}];(0,i.dispatch)("core/editor").updateEditorSettings({...a,styles:o})}})(`\n        .wp-block[data-block="${e}"] {\n\t\t\tanimation: .5s linear uicoreFadeIn both;\n\t\t\tanimation-timeline: view(block);\n            animation-range: entry ${n||"10"}vh entry ${o||"50"}vh;\n        }\n    `,a)})(m,s):(e=>{const t=`uicore-animate-style-${e}`,a=(0,i.select)("core/editor").getEditorSettings(),n=[...a.styles].filter((e=>e.id!==t));n.length!==a.styles.length&&(0,i.dispatch)("core/editor").updateEditorSettings({...a,styles:n})})(m)}),[d,g,A]),(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(n,{...r}),(0,l.jsx)(e.InspectorControls,{children:(0,l.jsxs)(t.PanelBody,{className:"components-panel__body-toggle uicore-animate-panel",title:(0,o.__)("Animations","uicore-animate"),initialOpen:!1,children:[(0,l.jsx)(t.SelectControl,{label:(0,o.__)("Animation","uicore-animate"),value:d,options:[{label:(0,o.__)("None","uicore-animate"),value:""},...window.uicore_animations_list],onChange:e=>c({uiAnimateName:e})}),(0,l.jsx)(t.SelectControl,{label:(0,o.__)("Trigger","uicore-animate"),value:b,options:[{label:(0,o.__)("Scroll","uicore-animate"),value:"scroll"},{label:(0,o.__)("Entrance","uicore-animate"),value:"entrance"}],onChange:e=>c({uiAnimateTrigger:e})}),"scroll"!==b&&(0,l.jsx)(t.SelectControl,{label:(0,o.__)("Duration","uicore-animate"),value:y,options:[{label:(0,o.__)("Fast","uicore-animate"),value:"fast"},{label:(0,o.__)("Normal","uicore-animate"),value:""},{label:(0,o.__)("Slow","uicore-animate"),value:"slow"}],onChange:e=>c({uiAnimateDuration:e})}),(0,l.jsx)(t.TextControl,{label:"scroll"===b?(0,o.__)("Start Offset (vh)","uicore-animate"):(0,o.__)("Delay (ms)","uicore-animate"),value:g,placeholder:"scroll"===b?"10":"100",type:"number",onChange:e=>c({uiAnimateDelay:e})}),"scroll"===b?(0,l.jsx)(t.TextControl,{label:(0,o.__)("End Offset (vh)","uicore-animate"),value:A,placeholder:"50",type:"number",onChange:e=>c({uiAnimateDelayEnd:e})}):(0,l.jsx)(t.Button,{className:"button button-secondary",onClick:e=>{e.target.disabled=!0;let t=document.querySelector(`.wp-block[data-block="${m}"]`);if(!t){const e=window.parent.document.querySelector('iframe[name="editor-canvas"]'),i=e.contentDocument||e.contentWindow.document;t=i.querySelector(`.wp-block[data-block="${m}"]`)}t.classList.add("uicore-animate-hide"),setTimeout((()=>{t.classList.add(d),t.classList.remove("uicore-animate-hide"),"fast"===y?t.classList.add("animated","animated-fast"):"slow"===y?t.classList.add("animated","animated-slow"):t.classList.add("animated")}),50),setTimeout((()=>{t.classList.remove(d),e.target.disabled=!1}),2e3)},children:(0,o.__)("Play Animation","uicore-animate")})]})})]})})),(0,n.addFilter)("editor.BlockListBlock","uicore-animate/add-animation-class-and-style",(e=>t=>{if(!t?.attributes)return(0,l.jsx)(e,{...t});const{attributes:i}=t;if(-1!==t.block.name.indexOf("uicore/"))return(0,l.jsx)(e,{...t});if(i.uiAnimateName){const a={className:`${t.className} ${"scroll"===i.uiAnimateTrigger?"uicore-animate-scroll "+i.uiAnimateName:""}`};return(0,l.jsx)(e,{...t,...a})}return(0,l.jsx)(e,{...t})})),(0,n.addFilter)("blocks.registerBlockType","uicore-animate/add-animation-attribute",((e,t)=>(-1!==t.indexOf("uicore/")||(e.attributes={...e.attributes,uiAnimateTrigger:{type:"string",default:"entrance"},uiAnimateName:{type:"string",default:""},uiAnimateDuration:{type:"string",default:""},uiAnimateDelay:{type:"string",default:""},uiAnimateDelayEnd:{type:"string",default:""}}),e))),(0,n.addFilter)("blocks.getSaveContent.extraProps","uicore-animate/add-animation-data-attributes",((e,t,i)=>{if(-1!==t?.name?.indexOf("uicore/"))return e;if(i.uiAnimateName){const t=i.uiAnimateDelay||"10",a=i.uiAnimateDelayEnd||"50";e={...e,...""!==i.uiAnimateName&&{"data-ui-animation":i.uiAnimateName},..."scroll"!==i.uiAnimateTrigger&&{"data-ui-trigger":i.uiAnimateTrigger,...i.uiAnimateDuration?{"data-ui-duration":i.uiAnimateDuration}:{},...i.uiAnimateDelay?{"data-ui-delay":i.uiAnimateDelay}:{}},className:`${e.className} ${"scroll"===i.uiAnimateTrigger?"uicore-animate-scroll":"uicore-animate-hide"}`,style:{...e.style,..."scroll"===i.uiAnimateTrigger&&{"animation-range":`entry ${t}vh entry ${a}vh`}}}}return e}))})();